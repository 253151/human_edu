<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
				 "http://mybatis.org/dtd//mybatis-3-mapper.dtd">

<mapper namespace="com.human.springboot.empDAO">

<select id="list" resultType="com.human.springboot.EmpDTO">
	SELECT a.employee_id, a.emp_name, a.salary, b.emp_name manager_name
	FROM employees a, employees b
	WHERE a.manager_id=b.employee_id
	ORDER BY emp_name
	</select>
<select id="listRoomType" resultType="com.human.springboot.RoomtypeDTO">
	SELECT typenum, typename
	FROM roomtype
</select>

<select id="listRoomInfo" resultType="com.human.springboot.RoomInfoDTO">

	SELECT num, name, type, howmany, howmuch
	FROM roominfo 
</select>

	
<select id="listDepart" resultType="com.human.springboot.DepartDTO" >
	SELECT a.department_id,a.department_name, b.department_name parent_name,c.emp_name 
 	FROM departments a, departments b, employees c
	WHERE a.parent_id=b.department_id(+)
  		and a.manager_id=c.employee_id(+)
	ORDER BY a.department_name
</select>

<insert id="insertRoomType">
	insert into roomtype values(seq_roomtype.nextval,#{param1},null)
</insert>

<delete id="deleteRoomInfo">
	delete from roominfo where num=#{param1}
</delete>

<update id="updateRoomInfo">
	update roominfo
	set name=#{param2}, type=#{param3}, howmany=#{param4}, howmuch=#{param5}
	where num=#{param1}
</update>

<insert id="insertRoomInfo">
	insert into roominfo values(seq_roominfo.nextval,#{param1},#{param2},#{param3},#{param4})
</insert>

<select id="getMemberCount" resultType="int">
	select count(*) cnt from member where loginid=#{param1} and passcode=#{param2}
</select>
</mapper>

